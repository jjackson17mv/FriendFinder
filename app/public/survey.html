<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Survey</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="css/style.css" />

	<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" ></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" ></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
</head>
<body>
    <div class="container">

        <h2>Survey Questions</h2>
        <hr>
    
        <form id="friend-survey">
          
        <h3><strong>About You</strong></h3>
        <h4>Name (Required)</h4>
        <input type="text" id="name" class="form-control" required>
    
        <h4>Link to Photo Image (Required)</h4>
        <input type="text" id="photo" class="form-control" required>
    
        <hr>
    
        <h3><strong>Question 1</strong></h3>
        <h4>Fine Wine is better than twist off caps.</h4>
        <select class="chosen-select" id="q1">
          <option value=""></option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
    
        <h3><strong>Question 2</strong></h3>
        <h4>Soccer is the best sport in the world.</h4>
        <select class="chosen-select" id="q2">
          <option value=""></option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
    
    
        <h3><strong>Question 3</strong></h3>
        <h4>Work experience is just as beneficial as a college degree.</h4>
        <select class="chosen-select" id="q3">
          <option value=""></option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>

        <h3><strong>Question 4</strong></h3>
    <h4>Marvel is better than DC</h4>
    <select class="chosen-select" id="q4">
      <option value=""></option>
      <option value="1">1 (Strongly Disagree)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Strongly Agree)</option>
    </select>


    <h3><strong>Question 5</strong></h3>
    <h4>Original Pokemon is the best.</h4>
    <select class="chosen-select" id="q5">
      <option value=""></option>
      <option value="1">1 (Strongly Disagree)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Strongly Agree)</option>
    </select>


    <h3><strong>Question 6</strong></h3>
    <h4>Xbox is better than Playstation</h4>
    <select class="chosen-select" id="q6">
      <option value=""></option>
      <option value="1">1 (Strongly Disagree)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Strongly Agree)</option>
    </select>

    <button class="btn btn-primary btn-lg btn-block" id="submit"><i class="fa fa-check-circle" aria-hidden="true"></i>
        Submit</button>
       </form>
   
   
       <!-- Modal -->
     <div class="modal fade" id="myModal" role="dialog">
         <div class="modal-dialog">
         
           <!-- Modal content-->

           
           <div class="modal-content">
             <div class="modal-header">
               <button type="button" class="close" data-dismiss="modal">&times;</button>
               <h2 class="modal-title"><strong>Best Match:</strong></h2>
             </div>
             <div class="modal-body">
               <h2 id="match-name"></h2>
               <img id="match-img" src="" alt="Best Friend picture">
             </div>
             <div class="modal-footer">
               <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
             </div>
           </div>
           
         </div>
       </div>
   
       <hr>
       <footer class="footer">
         <div class="container">
           <p><a href="/api/friends">API Friends List</a> | <a href="https://github.com/jjackson17mv/friendfinder">GitHub Repo</a></p>
         </div>
       </footer>
   
     </div>

     <script type="text/javascript">
    
        // Capture the form inputs
        $("#submit").on("click", function(event) {
          event.preventDefault();
          // Form validation

          function validateForm() {
            var isValid = true;
            $(".form-control").each(function() {
              console.log("form-control");
              if ($(this).val() === "") {
                console.log("null");
                isValid = false;
              }
            });
            $(".chosen-select").each(function() {
              console.log("chosen-select");
              if ($(this).val() === "") {
                console.log("null");
                isValid = false;
              }
            });
            return isValid;
          }
          // If all required fields are filled
          
          if (validateForm()) {

            // Create an object for the user"s data
           
            var userData = {
              name: $("#name").val(),
              photo: $("#photo").val(),
              scores: [
                $("#q1").val(),
                $("#q2").val(),
                $("#q3").val(),
                $("#q4").val(),
                $("#q5").val(),
                $("#q6").val(),
              ]
            };

            // AJAX post the data to the friends API.


        $.post("/api/friends", userData).then (function(data) {
          console.log("This is the post request");
       
          $("#match-name").text(data.name);
          $("#match-img").attr("src", data.photo);
         

          $("#myModal").modal("toggle");
        });
      } else {
        alert("Please fill out all fields before submitting!");
      }
    
    })
  </script>
   
</body>

</html>